#: include common/utils.kv
#: include common/buttons.kv

#: set glue_min dp(10)
#: set glue_max dp(28)

#: set nav_size sp(24)
#: set nav_padding dp(16)

<HGlueAuto@HGlue>:
    size_hint_y: 1.0
    size_hint_min_y: glue_min * self.size_hint_y
    size_hint_max_y: glue_max * self.size_hint_y

<HGlueHalf@HGlueAuto>:
    size_hint_y: 0.5

<HGlueSingle@HGlueAuto>:
    size_hint_y: 1.0

<HGlueDouble@HGlueAuto>:
    size_hint_y: 2.0

<VGlueAuto@VGlue>:
    size_hint_x: 1.0
    size_hint_min_x: glue_min * self.size_hint_x
    size_hint_max_x: glue_max * self.size_hint_x

<VGlueHalf@VGlueAuto>:
    size_hint_x: 0.5

<VGlueSingle@VGlueAuto>:
    size_hint_x: 1.0

<VGlueDouble@VGlueAuto>:
    size_hint_x: 2.0

<HLineThin@HLine>:
    thickness: dp(2)

<VLineThin@VLine>:
    thickness: dp(2)

<NavButtonBack@SimpleButton+AnchorLayout>:
    anchor_x: "center"
    anchor_y: "center"
    foreground_color: app.colors.foreground_0 if self.down else app.colors.foreground_1
    background_color: (0.0, 0.0, 0.0, 0.0)
    size_hint: (None, None)
    size: (icon.width + nav_padding * 2, icon.height + nav_padding * 2)
    pos_hint: {"x": 0.0, "top": 1.0}
    animation_duration: 0.1

    on_release: app.switch_back()

    Widget:
        id: icon
        size_hint: (None, None)
        size: (nav_size, nav_size)

        canvas:
            PushMatrix

            Translate:
                xy: self.pos

            Scale:
                x: self.width / 48.0
                y: self.height / 48.0

            Color:
                rgb: root.foreground_color
            SmoothLine:
                points: (34.0, 2.0, 4.0, 24.0, 34.0, 46.0)
                width: 3.0

            PopMatrix

<NavButtonSettings@SimpleButton+AnchorLayout>:
    anchor_x: "center"
    anchor_y: "center"
    foreground_color: app.colors.foreground_0 if self.down else app.colors.foreground_1
    background_color: (0.0, 0.0, 0.0, 0.0)
    size_hint: (None, None)
    size: (icon.width + nav_padding * 2, icon.height + nav_padding * 2)
    pos_hint: {"right": 1.0, "top": 1.0}
    animation_duration: 0.1

    on_release: app.switch_screen("settings")

    Widget:
        id: icon
        size_hint: (None, None)
        size: (nav_size, nav_size)

        canvas:
            PushMatrix

            Translate:
                xy: self.pos

            Scale:
                x: self.width / 48.0
                y: self.height / 48.0

            Color:
                rgb: root.foreground_color
            SmoothLine:
                circle: (12.0, 12.0, 8.0, 0.0, 360.0, 16)
                width: 3.0
            SmoothLine:
                circle: (36.0, 36.0, 8.0, 0.0, 360.0, 16)
                width: 3.0
            SmoothLine:
                points: (44.0, 12.0, 20.0, 12.0)
                width: 3.0
                cap: "square"
            SmoothLine:
                points: (4.0, 36.0, 28.0, 36.0)
                width: 3.0
                cap: "square"

            PopMatrix

